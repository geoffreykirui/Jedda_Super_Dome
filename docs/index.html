<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Autodesk Forge Viewer files (IMPORTANT) -->
    <link rel="stylesheet" href="https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/style.css">
    <script src="https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/viewer3D.js"></script>
    <style>
        /** Just simple CSS styling to make this page a little nicer **/
            /** Viewing 3D models in web browser **/
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
  <!-- The Viewer will be instantiated here -->
  <div id="forgeViewer"></div>
  <!-- Custom script -->
  <script>
    var viewer;
    var options = {
        env: 'AutodeskProduction2',
        api: 'derivativeV2_EU',  // for models uploaded to EMEA change this option to 'derivativeV2_EU'
        getAccessToken: function(onTokenReady) {
            //
            // TODO: Replace static access token string below with call to fetch new token from your backend
            // Both values are provided by Forge's Authentication (OAuth) API.
            //
            // Example Forge's Authentication (OAuth) API return value:
            // {
            //    "access_token": "<YOUR_APPLICATION_TOKEN>",
            //    "token_type": "Bearer",
            //    "expires_in": 86400
            // }
            //    
            var token = 'eyJhbGciOiJSUzI1NiIsImtpZCI6IlU3c0dGRldUTzlBekNhSzBqZURRM2dQZXBURVdWN2VhIn0.eyJzY29wZSI6WyJjb2RlOmFsbCIsImRhdGE6d3JpdGUiLCJkYXRhOnJlYWQiLCJidWNrZXQ6Y3JlYXRlIiwiYnVja2V0OmRlbGV0ZSIsImJ1Y2tldDpyZWFkIl0sImNsaWVudF9pZCI6Ik1FMm1MaUFwNk9ycWlBUEx4Q2hkd3hQRFVWYk5GVUs0IiwiYXVkIjoiaHR0cHM6Ly9hdXRvZGVzay5jb20vYXVkL2Fqd3RleHA2MCIsImp0aSI6InZsRmozUFc1TTFOWGh0YzhjQTZzTGFCc09udUJubG9TWktHTG44WkJCVUwzMDA5YkhMbW9mc3h5S3JHUjdsZEYiLCJleHAiOjE2NTExNTUzMTd9.gyUTUIPVJXRjisvZEwwLSxfEBt-xZJ7u5h2EPJHorUS6CKBRmtuekVt98BgYA2ikl0jcOyTTxByXQ6kZkxmQ2IY6coYQBDZVXdw14JAttIp9jjYMJkGQgZZ29CYAq9MEbn2oMwhgg-woiD8O2Nh2f5Sygr1V7Zs1j1yZHxOIq11UEz1XT3_Dx9DeFONTQb_jy0gpVt3K13xHYMdplKQ5GquL6opHLkHmXH8cJJxBNmtRf-_PWXQiWfG7fnOCn8R2CZe5WRk1LsBqiqX289p23zgHJl_UXD0ZfBsO0t0zM3zUfJmlEAm6uqWlwbAx685Y4O9hLtE2_WT4aaTLrqNOrQ';
            var timeInSeconds = 3599; // Use value provided by Forge Authentication (OAuth) API
            onTokenReady(token, timeInSeconds);
        }
    };
            // Run this when the page is loaded
    // var documentId = 'urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6amVkZGFidWNrZXQwMDEvSmVkZGFoX1N1cGVyX0RvbWVfRV8xMi0xXzAwMS56aXA';
    Autodesk.Viewing.Initializer(options, function() {
    
        var htmlDiv = document.getElementById('forgeViewer');
        viewer = new Autodesk.Viewing.GuiViewer3D(htmlDiv);
        viewer.start();
        if (startedCode > 0) {
        console.error('Failed to create a Viewer: WebGL not supported.');
        return;
    }

    console.log('Initialization complete, loading a model next...');

});
    var documentId = 'urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6amVkZGFidWNrZXQwMDEvSmVkZGFoX1N1cGVyX0RvbWVfRV8xMi0xXzAwMS56aXA';
    Autodesk.Viewing.Document.load(documentId, onDocumentLoadSuccess, onDocumentLoadFailure);
    
    function onDocumentLoadSuccess(viewerDocument) {
        var defaultModel = viewerDocument.getRoot().getDefaultGeometry();
        viewer.loadDocumentNode(viewerDocument, defaultModel);
       // var viewables = viewerDocument.getRoot().search({'type':'geometry'});
       // viewer.loadDocumentNode(viewerDocument, viewables[0]);
    
    }
    
    function onDocumentLoadFailure() {
        console.error('Failed fetching Forge manifest');
    }
    
    
    </script>
</body>

</html>
